---
marp: true
theme: default
paginate: true
backgroundColor: white
color: black
header: 'ì›ì¥ ì¤‘ê³„ ì„œë²„ ë¦¬ë·°'
footer: 'Next Securities Engineering Team'
---

<style>
/* ê¸°ë³¸ ìŠ¤íƒ€ì¼ - ìŠ¬ë¼ì´ë“œì— ë§ëŠ” ìµœì í™”ëœ í°íŠ¸ í¬ê¸° */
.slide {
  font-size: 0.6em;
  line-height: 1.3;
  margin-top: 0.8rem;
  margin-bottom: 0.8rem;
}

.title-slide {
  text-align: center;
  padding: 2rem;
  border-bottom: 3px solid #2c3e50;
}

.title-slide h1 {
  font-size: 2rem;
  margin-bottom: 0.8rem;
}

.title-slide h2 {
  font-size: 1.1rem;
}

.section-header {
  border-left: 4px solid #3498db;
  padding-left: 1rem;
  margin-top: 0.6rem;
  margin-bottom: 0.6rem;
}

.section-header h2 {
  font-size: 1.2rem;
}

.content-box {
  background-color: #f8f9fa;
  border: 1px solid #e9ecef;
  border-radius: 8px;
  font-size: 0.7em;
  padding: 0.2rem;
  margin: 0.2rem 0;
}

.content-box h3 {
  font-size: 1rem;
  margin-bottom: 0.8rem;
}

.content-box ul {
  margin: 0.5rem 0;
}

.content-box li {
  margin: 0.3rem 0;
}

.code-block {
  background-color: #f1f3f4;
  border: 1px solid #dadce0;
  border-radius: 6px;
  padding: 0.8rem;
  font-family: 'Cascadia Code', 'Consolas', 'Monaco', monospace;
  font-size: 0.7em;
  margin: 0.8rem 0;
}

.architecture-box {
  background-color: #e8f4fd;
  border: 1px solid #b3d9ff;
  border-radius: 8px;
  font-size: 0.7em;
  padding: 1.2rem;
  margin: 0.8rem 0;
}

.architecture-box pre {
  font-size: 0.75em;
  margin: 0.5rem 0;
}

.improvement-box {
  background-color: #fff3cd;
  border: 1px solid #ffeaa7;
  border-radius: 8px;
  font-size: 0.6em;
  padding: 0.4rem;
  margin: 0.4rem 0;
}

.improvement-box h4 {
  font-size: 1.2rem;
  margin-top: 0.4rem;
  margin-bottom: 0.4rem;
}

.tech-stack-box {
  background-color: #d1ecf1;
  border: 1px solid #bee5eb;
  border-radius: 8px;
  font-size: 1rem;
  padding: 0.6rem;
  margin: 0.6rem 0;
}

.tech-stack-box h3 {
  font-size: 1.3rem;
  margin-top: 0.6rem;
  margin-bottom: 0.6rem;
}

.tech-stack-box ul {
  margin: 0.5rem 0;
}

.tech-stack-box li {
  margin: 0.3rem 0;
}

h3 {
  font-size: 1.3rem;
  margin-top: 0.4rem;
  margin-bottom: 0.4rem;
}

h4 {
  font-size: 1.1rem;
  margin-top: 0.4rem;
  margin-bottom: 0.4rem;
}

ul {
  margin: 0.4rem 0;
}

li {
  margin: 0.2rem 0;
}

p {
  margin: 0.4rem 0;
}
</style>

<div class="title-slide">

# ğŸš€ heygent
## ì›ì¥ ì¤‘ê³„ ì„œë²„ ê°œë°œ ë¦¬ë·°

</div>

![next-logo-eng-horizontal-black-white](img/logo-next-eng-horizontal-black-white.png)

---

## ëª©ì°¨

1. **ì›ì¥ ì¤‘ê³„ ì„œë²„ ê°œìš”**
   - ë°°ê²½, í•„ìš”ì„±, ì—­í• 
2. **ì£¼ìš” ê¸°ëŠ¥**
3. **ì• í”Œë¦¬ì¼€ì´ì…˜ ì•„í‚¤í…ì²˜**
4. **ì½”ë“œ ë¦¬ë·°**
5. **Live Demo**
6. **ì•ìœ¼ë¡œì˜ ê°œë°œ ê³„íš**
   - ì›ì¥ ë°ì´í„° ê²€ì¦
   - ë°ì´í„° í’ˆì§ˆ ì›¹ í¬í„¸

---

<div class="section-header">

#### 1. ì›ì¥ ì¤‘ê³„ ì„œë²„ ê°œìš”

</div>

##### ë°°ê²½ ë° í•„ìš”ì„±

- **íŒŒì¼ ë™ê¸°í™” ìë™í™”**: ë‹¤ì–‘í•œ ì†ŒìŠ¤ì—ì„œ íŒŒì¼ì„ ì£¼ê¸°ì ìœ¼ë¡œ ë™ê¸°í™”
- **ì•Œë¦¼ ì‹œìŠ¤í…œ**: ë™ê¸°í™” ìƒíƒœ ë° ì˜¤ë¥˜ì— ëŒ€í•œ ì¦‰ì‹œ ì•Œë¦¼
- **í™•ì¥ì„±**: ë‹¤ì–‘í•œ ì €ì¥ì†Œ ë° ì•Œë¦¼ ì±„ë„ ì§€ì›

##### ì—­í• 

- **ì¤‘ê³„ ì„œë²„**: ì†ŒìŠ¤ì™€ íƒ€ê²Ÿ ê°„ì˜ ë°ì´í„° ì „ì†¡ ì¤‘ê³„
- **íŒŒì¼ ê²€ì¦**: íŒŒì¼ ìœ íš¨ì„± ë° ë¬´ê²°ì„± ê²€ì‚¬
- **ìŠ¤ì¼€ì¤„ë§**: Cron ê¸°ë°˜ ì •ê¸° ì‘ì—… ì‹¤í–‰
- **ë¡œê¹…**, **ì•Œë¦¼**: ëª¨ë“  ì‘ì—…ì— ëŒ€í•œ ìƒì„¸í•œ ë¡œê·¸ ê¸°ë¡ ë° ì•Œë¦¼ ì„œë¹„ìŠ¤

---

<div class="section-header">

#### 2. ì£¼ìš” ê¸°ëŠ¥

</div>

<div class="content-box">

##### 1. Cron ê¸°ë°˜ ìŠ¤ì¼€ì¤„ë§
- Cronos ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•œ ìœ ì—°í•œ ìŠ¤ì¼€ì¤„ ì„¤ì •
- ë‹¤ì¤‘ ë°±ê·¸ë¼ìš´ë“œ ìŠ¤ì¼€ì¤„ ì§€ì› ë° íƒ€ì„ì¡´ ì„¤ì •

##### 2. íŒŒì¼ ê°ì‹œ ì‹œìŠ¤í…œ
- í´ë§ ê¸°ë°˜ íŒŒì¼ ëª¨ë‹ˆí„°ë§
- íŒŒì¼ ë³€ê²½ ê°ì§€ ë° ìë™ ì²˜ë¦¬

##### 3. ë‹¤ì–‘í•œ ì†ŒìŠ¤/íƒ€ê²Ÿ ì§€ì›
- ë¡œì»¬ íŒŒì¼ ì‹œìŠ¤í…œ (Linux, Windows ëª¨ë‘ ì»¤ë²„)
- Azure Blob Storage (SFTP, SAS)

</div>

---

<div class="section-header">

#### 2. ì£¼ìš” ê¸°ëŠ¥

</div>

<div class="content-box">

##### 4. ì•Œë¦¼ ì‹œìŠ¤í…œ
- **Lark Webhook**: ì‹¤ì‹œê°„ íŒ€ ì•Œë¦¼
- **Email**: ì´ë©”ì¼ ì•Œë¦¼ ì§€ì›
- **SMS**: ë¬¸ì ë©”ì‹œì§€ ì•Œë¦¼
- **Factory Pattern**: ì•Œë¦¼ ì±„ë„ ë™ì  ì„ íƒ

##### 5. ì„¤ì • ê´€ë¦¬
- YAML ê¸°ë°˜ ì„¤ì • íŒŒì¼
- í™˜ê²½ë³„ ì„¤ì • ë¶„ë¦¬

##### 6. ì˜ì¡´ì„± ì£¼ì…
- Microsoft.Extensions.Hosting ê¸°ë°˜ DI ì»¨í…Œì´ë„ˆ
- ì„œë¹„ìŠ¤ ìƒëª…ì£¼ê¸° ê´€ë¦¬

</div>


---

<div class="section-header">

#### 3. ì• í”Œë¦¬ì¼€ì´ì…˜ ì•„í‚¤í…ì²˜

</div>

<div class="content-box">
- ë‹¨ë°©í–¥ ë°ì´í„° íë¦„, ëŠìŠ¨í•œ ê²°í•© (Loose Coupling)<br>
- í™•ì¥ ê°€ëŠ¥í•œ ì•Œë¦¼ ì‹œìŠ¤í…œ
</div>

<div class="architecture-box">

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   YAML Config   â”‚    â”‚  CronPolling     â”‚    â”‚   FileWatcher   â”‚
â”‚     Loader      â”‚â”€â”€â–¶â”‚    Service       â”‚â”€â”€â–¶â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚                        â”‚
                                â–¼                        â–¼
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚  Notification    â”‚    â”‚   Azure Blob    â”‚
                       â”‚    Service       â”‚â”€â”€â–¶â”‚     Service     â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚ Lark/Email/SMS   â”‚
                       â”‚  Notifications   â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

</div>

---

<div class="section-header">

#### 3. ì• í”Œë¦¬ì¼€ì´ì…˜ ì•„í‚¤í…ì²˜

</div>

![alt text](img/aa.png)

---

<div class="section-header">

#### 3. ì• í”Œë¦¬ì¼€ì´ì…˜ ì•„í‚¤í…ì²˜ - ì„¤ì • ëª¨ë¸

</div>

<div class="content-box">
- ê³„ì¸µì  ì„¤ì • êµ¬ì¡°<br>
- íƒ€ì…ë³„ ì„¤ì • ë¶„ë¦¬, ìœ ì—°í•œ ì†ŒìŠ¤/íƒ€ê²Ÿ ì„¤ì •
</div>

<div class="code-block">

```csharp
public class AppConfig {
    public ScheduleSection schedule { get; set; }
    public SourceSection source { get; set; }
    public TargetSection target { get; set; }
    public NotificationSection notification { get; set; }
    ... // omitted
}

public class ScheduleSection {
    public string[] cron_expression { get; set; }
    public string timezone { get; set; }
}

public class SourceSection {
    ... // omitted
}
```

</div>

---

<div class="section-header">

#### 3. ì• í”Œë¦¬ì¼€ì´ì…˜ ì•„í‚¤í…ì²˜ - YAML ì„¤ì •

</div>

![heygentConfig.yaml](<img/config.yaml capture - ë³µì‚¬ë³¸.png>)

---

<div class="section-header">

#### 3. ì• í”Œë¦¬ì¼€ì´ì…˜ ì•„í‚¤í…ì²˜ - Dependencies

</div>

![Dependencies](img/Dependencies.png)

---

<div class="section-header">

#### 3. ì• í”Œë¦¬ì¼€ì´ì…˜ ì•„í‚¤í…ì²˜ - Tech Stack

</div>

<div class="tech-stack-box">

#### .NET

- **.NET 8 (C# 12)** LTS (Long Term Support)

- **System.IO.Pipes (Named Pipe)**: IPC ê¸°ë°˜ í†µì‹ 

#### OSS

- **Cronos** - Cron í‘œí˜„ì‹ì— ë”°ë¥¸ background scheduling

- **Renci.SshNet** - SFTP client

- **YamlDotNet** - Yaml loader

- **Serilog**: êµ¬ì¡°í™”ëœ ë¡œê¹…

</div>

---

<div class="section-header">

#### 3. ì• í”Œë¦¬ì¼€ì´ì…˜ ì•„í‚¤í…ì²˜ - ì‘ë™ ë°©ì‹

</div>

![heygent ì‘ë™ ë°©ì‹](<img/AB ì‘ë™ë°©ì‹3.png>)

---

<div class="section-header">

#### 4. ì½”ë“œ ë¦¬ë·° - ì• í”Œë¦¬ì¼€ì´ì…˜ ì§„ì…ì  (Program.cs)

</div>

<div class="content-box">
- Serilog ë¡œê¹… í†µí•©
</div>

<div class="code-block">

```csharp
Log.Logger = new LoggerConfiguration()
    .MinimumLevel.Information()
    .WriteTo.Console(
        outputTemplate: "{Timestamp:yyyy-MM-dd HH:mm:ss.fff} [{Level:u4}] {Message:lj}{NewLine}{Exception}"
    )
    .WriteTo.File(
        path: "logs/heygent-.log",
        rollingInterval: RollingInterval.Day,
        outputTemplate: "{Timestamp:yyyy-MM-dd HH:mm:ss.fff} [{Level:u4}] {Message:lj}{NewLine}{Exception}",
        fileSizeLimitBytes: 50 * 1024 * 1024, // 50MB ì´ˆê³¼í•˜ë©´ ìƒˆ íŒŒì¼ ìƒì„±.
        retainedFileCountLimit: 60,
        buffered: false // ì¦‰ì‹œì“°ê¸°. ë©”ëª¨ë¦¬ ë²„í¼ ìµœì†Œí™”
    )
    .CreateLogger();
```

---

<div class="section-header">

#### 4. ì½”ë“œ ë¦¬ë·° - ì• í”Œë¦¬ì¼€ì´ì…˜ ì§„ì…ì  (Program.cs)

</div>

<div class="content-box">
- HostedServiceë¡œ ë°±ê·¸ë¼ìš´ë“œ ì‘ì—… ê´€ë¦¬<br>
- Factory Patternì„ í†µí•œ ì•Œë¦¼ ì„œë¹„ìŠ¤ ìƒì„±
</div>

<div class="code-block">

```csharp
var host = Host.CreateDefaultBuilder(args)
    .UseSerilog()
    .ConfigureServices(services =>
    {
        services.AddSingleton<YamlConfigHelper>();
        services.AddHostedService<CronPollingService>();
        services.AddTransient<FileWatcher>();

        ... // omitted

        // ì•Œë¦¼ ì„œë¹„ìŠ¤ ë“±ë¡
        services.AddSingleton<INotificationSenderFactory, NotificationSenderFactory>();
        services.AddSingleton<NotificationService>();
    })
    .Build();
```

</div>

---

<div class="section-header">

#### 4. ì½”ë“œ ë¦¬ë·° - ìŠ¤ì¼€ì¤„ë§ ì„œë¹„ìŠ¤ (heygent CronPollingService)

</div>

<div class="content-box">
- ë¹„ë™ê¸° ì²˜ë¦¬ë¡œ ì„±ëŠ¥ ìµœì í™”, 1ë¶„ ê°„ê²©ìœ¼ë¡œ Cron í‘œí˜„ì‹ í™•ì¸<br>
- ì¡°ê±´ ë§Œì¡± ì‹œ FileWatcher ì‹¤í–‰
</div>

<div class="code-block">

```csharp
public class CronPollingService : BackgroundService
{
    private readonly ILogger<CronPollingService> _logger;
    private readonly IFileWatcher _fileWatcher;
    private readonly NotificationService _notifier;
    private List<CronExpression> _cronExpressions;
    private TimeZoneInfo _timeZone;

    protected override async Task ExecuteAsync(CancellationToken stoppingToken)
    {
        while (!stoppingToken.IsCancellationRequested)
        {
            ... // omitted
            await Task.Delay(TimeSpan.FromMinutes(1), stoppingToken);
        }
    }
}
```

</div>

---

<div class="section-header">

#### 4. ì½”ë“œ ë¦¬ë·° - FileWatcher (íŒŒì¼ ê°ì‹œ ë° ì²˜ë¦¬)

</div>

<div class="content-box">
- Interface Segregation Principle ì ìš©<br>
- DTOë¥¼ í†µí•œ ë°ì´í„° ì „ë‹¬, ë¹„ë™ê¸° ì•Œë¦¼ ì²˜ë¦¬
</div>

<div class="code-block">

```csharp
public class FileWatcher : IFileWatcher
{
    private readonly ILogger<FileWatcher> _logger;
    private readonly string _rootDirectory;

    public async Task InspectAllFiles()
    {
        var files = GetAllFiles();
        foreach (var file in files)
        {
            if (!IsAlreadyInspect(file) && IsValid(file))
            {
                var content = TryReadText(file);
                ... // omitted
                UpdateIsInspect(file);
            }
        }
    }
}
```

</div>

---

<div class="section-header">

#### 5. Live Demo

</div>

---

<div class="section-header">

#### 6. ì•ìœ¼ë¡œì˜ ê°œë°œ ê³„íš

</div>

##### 1) ì›ì¥ ë°ì´í„° ê²€ì¦ (í•„ìš” ì‹œ)

<div class="improvement-box">

## í•„ë“œ ìŠ¤í‚¤ë§ˆ êµ¬ì¡° ê²€ì¦
- **ì›ì¥ ìœ í˜•ë³„ ìŠ¤í‚¤ë§ˆ ì •ì˜**: ê° ì›ì¥ íƒ€ì…ì— ë§ëŠ” í•„ë“œ êµ¬ì¡° ê²€ì¦
- **ë°ì´í„° íƒ€ì… ê²€ì¦**: ë¬¸ìì—´, ìˆ«ì, ë‚ ì§œ ë“± íƒ€ì…ë³„ ìœ íš¨ì„± ê²€ì‚¬
- **í•„ìˆ˜ í•„ë“œ ê²€ì¦**: ëˆ„ë½ëœ í•„ìˆ˜ ë°ì´í„° ê°ì§€ ë° ë³´ê³ 

## í—¤ë”/ë ˆì½”ë“œ ë¹„êµ ê²€ì¦
- **ì¼ê´€ì„± ê²€ì‚¬**: í—¤ë” ì •ë³´ì™€ ì‹¤ì œ ë°ì´í„° ë ˆì½”ë“œ ê°„ ì¼ì¹˜ì„± í™•ì¸
- **í•©ê³„ ê²€ì¦**: ë ˆì½”ë“œ í•©ê³„ì™€ í—¤ë” í•©ê³„ ë¹„êµ
- **ì¤‘ë³µ ë°ì´í„° ê²€ì‚¬**: ì¤‘ë³µ ë ˆì½”ë“œ ê°ì§€ ë° ì œê±°

</div>

---

<div class="section-header">

#### 6. ì•ìœ¼ë¡œì˜ ê°œë°œ ê³„íš

</div>

##### 2) ë°ì´í„° í’ˆì§ˆ ì›¹ í¬í„¸ (í•„ìš” ì‹œ)

<div class="improvement-box">

## Wireframe ì°¸ê³  (nxt-data-quality-web-v1) -> **https://nxt-data-quality-web-v1.vercel.app**
- **ëŒ€ì‹œë³´ë“œ**: ì‹¤ì‹œê°„ ë™ê¸°í™” ìƒíƒœ ë° ì˜¤ë¥˜ í˜„í™©
- **íŒŒì¼ ëª¨ë‹ˆí„°ë§**: íŒŒì¼ë³„ ì²˜ë¦¬ ìƒíƒœ ë° ì´ë ¥ ì¡°íšŒ
- **ì„¤ì • ê´€ë¦¬**: ì›¹ ê¸°ë°˜ ì„¤ì • ë³€ê²½ ë° ê²€ì¦
- **ì•Œë¦¼ ê´€ë¦¬**: ì•Œë¦¼ ì±„ë„ë³„ ì„¤ì • ë° í…ŒìŠ¤íŠ¸

## ì£¼ìš” ê¸°ëŠ¥
- **ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§**: WebSocketì„ í†µí•œ ì‹¤ì‹œê°„ ìƒíƒœ ì—…ë°ì´íŠ¸
- **ë¡œê·¸ ë·°ì–´**: êµ¬ì¡°í™”ëœ ë¡œê·¸ ê²€ìƒ‰ ë° í•„í„°ë§
- **ì„±ëŠ¥ ë©”íŠ¸ë¦­**: ì²˜ë¦¬ ì‹œê°„, ì„±ê³µë¥  ë“± ì„±ëŠ¥ ì§€í‘œ
- **ì‚¬ìš©ì ê¶Œí•œ**: ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´

</div>

---

<div class="section-header">

#### References

</div>

<div class="architecture-box">

- ERP Index
https://nsgbpjpgygq3.sg.larksuite.com/docx/Xxbpd1ww6oJ1z6xhZGulXToWggf

- heygent ì¤‘ê³„ ì„œë²„ ì„¤ê³„
https://nsgbpjpgygq3.sg.larksuite.com/docx/KLgqdH1cfoNlIrxUUKJld3qqgLc

- ë„¥ìŠ¤íŠ¸ì¦ê¶Œ_MS ERP ì‹œìŠ¤í…œ êµ¬ì¶•_ì—°ë™ì‹œìŠ¤í…œ_Rev0.1.pptx
https://nsgbpjpgygq3.sg.larksuite.com/file/JHeObx1IEo7rzhxVoRGlClqfgtg

- ERPì‹ ê·œì‹œìŠ¤í…œ  MSP RFP
https://nsgbpjpgygq3.sg.larksuite.com/docx/J4rddSfhuo5BUDxkYN9lTg4dgSh

- [ë³„ì²¨] 7ì£¼ì°¨_ì£¼ê°„ë³´ê³ _ë¶„ê°œë£°_Interface Layout_250801
https://nsgbpjpgygq3.sg.larksuite.com/sheets/IdIBs0jnbhHCtmtplvvl6Q4VgNh?sheet=10tuLJ

</div>

---

<div class="section-header">

## ê²½ì²­í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.

</div>

<br>

ğŸ§ **ì§ˆë¬¸ ë° í† ë¡ **

    - ì¸í”„ë¼ ìŠ¤íŠ¸ëŸ­ì²˜ì— ëŒ€í•œ ë…¼ì˜
    - ê°œì„  ì‚¬í•­ í† ë¡ 
    - ê¸°ìˆ ì  êµ¬í˜„ ë°©ë²• ë…¼ì˜
    - í–¥í›„ ë°œì „ ë°œí–¥ í˜‘ì˜

<br>
<br>

`eof`